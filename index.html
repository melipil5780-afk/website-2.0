<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sovereign | Web Architecture</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600&family=Montserrat:wght@100;400;700;900&display=swap" rel="stylesheet">
<style>
    :root { --accent: #c5a37d; --dark: #000; }
    * { margin: 0; padding: 0; box-sizing: border-box; cursor: none; }
    
    body { background: #000; color: #fff; font-family: 'Montserrat', sans-serif; overflow-x: hidden; width: 100%; -webkit-font-smoothing: antialiased; }

    /* --- MAIN 3D BACKGROUND (Vanta.js - Cosmic Alive Feel) --- */
    #vanta-bg { position: fixed; inset: 0; z-index: -2; }

    /* --- COSMIC OVERLAYS (Preserved from original) --- */
    #bg-texture {
        position: fixed; inset: -50%; width: 200%; height: 200%; z-index: -1;
        background: 
            radial-gradient(circle at 15% 25%, rgba(197, 163, 125, 0.2) 0%, transparent 45%),
            radial-gradient(circle at 85% 75%, rgba(60, 100, 150, 0.2) 0%, transparent 45%);
        animation: rotateBg 50s linear infinite;
        pointer-events: none; opacity: 0.6;
    }
    @keyframes rotateBg { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    #noise { position: fixed; inset: 0; background: url('https://www.transparenttextures.com/patterns/stardust.png'); opacity: 0.3; z-index: 1; pointer-events: none; }
    
    #spotlight { 
        z-index: 2; position: fixed; inset: 0;
        background: radial-gradient(circle 450px at var(--x, 50%) var(--y, 50%), transparent 0%, rgba(0,0,0,0.98) 100%); 
        pointer-events: none;
    }

    /* --- HERO --- */
    section { padding: 25vh 10vw; position: relative; z-index: 10; }
    #hero-tag-top { display: block; font-weight: 900; letter-spacing: 12px; font-size: 0.7rem; color: var(--accent); opacity: 0; transform: translateY(10px); transition: 1s 0.5s forwards; margin-bottom: 10px; }
    .hero-h1 { font-family: 'Cormorant Garamond'; font-size: clamp(2.5rem, 8vw, 7rem); line-height: 1.1; font-weight: 300; margin-bottom: 20px; display: inline-block; position: relative; }
    .word { opacity: 0; display: inline-block; transform: translateY(10px); transition: 0.6s ease; }
    .word.visible { opacity: 1; transform: translateY(0); }
    .bounce-line { width: 0%; height: 1px; background: var(--accent); position: absolute; bottom: -5px; left: 0; transition: width 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
    .line-active { width: 100%; }
    
    .hero-sub { max-width: 600px; font-size: 1.1rem; opacity: 0; line-height: 1.8; border-left: 1px solid rgba(197,163,125,0.3); padding-left: 30px; transition: 1.5s 0.8s forwards; color: #ccc; margin-top: 40px;}
    .reveal .hero-sub, .reveal #hero-tag-top { opacity: 1; transform: translateY(0); }

    /* --- GALLERY STACKING --- */
    #gallery { padding: 0 5vw; position: relative; z-index: 20; }
    .project-card { 
        position: -webkit-sticky; position: sticky; top: 5vh; height: 85vh; width: 100%; margin-bottom: 20vh; 
        display: flex; flex-direction: column; background: rgba(5,5,5,0.96);
        backdrop-filter: blur(25px); border-top: 1px solid rgba(197, 163, 125, 0.35); padding: 25px;
        box-shadow: 0 -30px 60px rgba(0,0,0,0.8); cursor: pointer;
    }
    .image-frame { width: 100%; height: 55vh; overflow: hidden; border: 1px solid rgba(255,255,255,0.08); position: relative; }
    .image-canvas { position: absolute; inset: 0; width: 100%; height: 100%; filter: brightness(0.4); transition: filter 0.8s; }
    .project-card:hover .image-canvas { filter: brightness(1); }
    
    .view-label { 
        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
        letter-spacing: 5px; font-size: 0.7rem; font-weight: 900; opacity: 0; transition: 0.3s; pointer-events: none; 
        background: rgba(0,0,0,0.6); padding: 15px 25px; border: 1px solid var(--accent);
    }
    .project-card:hover .view-label { opacity: 1; }

    /* --- FULL MODAL (Now 3D Alive!) --- */
    #modal { 
        position: fixed; inset: 0; background: #000; z-index: 10000; display: none; opacity: 0; transition: opacity 0.6s; 
        align-items: center; justify-content: center; flex-direction: column;
    }
    #modal.open { display: flex; opacity: 1; }
    #modal-canvas { width: 90vw; height: 80vh; max-width: 1400px; max-height: 900px; border: 1px solid rgba(197,163,125,0.3); }
    #close-modal { 
        position: fixed; top: 30px; right: 30px; font-size: 2.5rem; color: var(--accent); 
        background: rgba(0,0,0,0.5); border: 1px solid var(--accent); border-radius: 50%;
        width: 60px; height: 60px; line-height: 55px; text-align: center; cursor: pointer; z-index: 10001; transition: 0.3s;
    }

    /* --- MESSAGING & FINAL --- */
    .style-message { padding: 25vh 10vw; text-align: center; background: #000; position: relative; z-index: 30; }
    .shimmer-text { font-family: 'Cormorant Garamond'; font-size: clamp(2rem, 6vw, 4.5rem); font-weight: 300; background: linear-gradient(90deg, #333, #fff, #333); background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent; animation: shine 3s linear infinite; }
    @keyframes shine { to { background-position: 200% center; } }

    #final-section { background: #fff; color: #000; padding: 20vh 10vw; text-align: center; position: relative; z-index: 100; }
    .cta-btn { display: inline-block; padding: 25px 70px; background: #000; color: #fff; text-decoration: none; font-weight: 900; letter-spacing: 5px; animation: pulse 2.5s infinite; }
    @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.4); } 70% { box-shadow: 0 0 0 25px rgba(197, 163, 125, 0); } 100% { box-shadow: 0 0 0 0 rgba(0, 0, 0, 0); } }

    /* CURSOR */
    #c { width: 6px; height: 6px; background: #fff; z-index: 10001; position: fixed; mix-blend-mode: difference; border-radius: 50%; pointer-events: none;}
    #ca { width: 45px; height: 45px; border: 1px solid var(--accent); border-radius: 50%; position: fixed; z-index: 10001; transition: 0.12s; pointer-events: none;}

    @media (max-width: 768px) {
        #c, #ca, #spotlight { display: none !important; }
        .project-card { top: 2vh; height: 80vh; margin-bottom: 12vh; }
        .view-label { opacity: 1; top: 85%; width: 80%; text-align: center; }
        #modal-canvas { width: 95vw; height: 70vh; }
    }
</style>
</head>
<body onmousemove="handleMove(event)">

<div id="loader" style="position:fixed; inset:0; background:#000; z-index:9999; display:flex; align-items:center; justify-content:center; transition: 1s;">
    <div id="loader-n" style="font-family:'Cormorant Garamond'; font-size:8vw; color:var(--accent);">0</div>
</div>

<div id="vanta-bg"></div>
<div id="bg-texture"></div>
<div id="noise"></div>
<div id="spotlight"></div>
<div id="c"></div><div id="ca"></div>

<!-- Full 3D Modal -->
<div id="modal">
    <button id="close-modal" onclick="closeModal()">âœ•</button>
    <canvas id="modal-canvas"></canvas>
    <h2 id="modal-title" style="margin-top: 30px; font-family: 'Cormorant Garamond'; font-size: 3rem; font-weight: 300;"></h2>
</div>

<section id="hero-sec">
    <span id="hero-tag-top">DIGITAL ARCHITECTURE</span>
    <div style="display:inline-block; position:relative;">
        <h1 class="hero-h1" id="hero-text"></h1>
        <div class="bounce-line" id="hero-line"></div>
    </div>
    <p class="hero-sub">From a blank canvas to clinical authority. I architect the digital foundation for practitioners ready to establish their online sovereignty.</p>
</section>

<div id="gallery">
    <div class="project-card" data-img="Screenshot_24-12-2025_131027_melipil5780-afk.github.io.jpeg" data-title="The Grounded Space">
        <div class="image-frame"><canvas class="image-canvas"></canvas><div class="view-label">SEE FULL WEBSITE</div></div>
        <h2 style="font-family: 'Cormorant Garamond'; font-size: 2.8rem; margin-top: 25px; font-weight: 300;">The Grounded Space</h2>
    </div>
    <div class="project-card" data-img="healing.jpg" data-title="Somatic Safety">
        <div class="image-frame"><canvas class="image-canvas"></canvas><div class="view-label">SEE FULL WEBSITE</div></div>
        <h2 style="font-family: 'Cormorant Garamond'; font-size: 2.8rem; margin-top: 25px; font-weight: 300;">Somatic Safety</h2>
    </div>
    <div class="project-card" data-img="Screenshot_24-12-2025_122136_melipil5780-afk.github.io.jpeg" data-title="Analytical Soul">
        <div class="image-frame"><canvas class="image-canvas"></canvas><div class="view-label">SEE FULL WEBSITE</div></div>
        <h2 style="font-family: 'Cormorant Garamond'; font-size: 2.8rem; margin-top: 25px; font-weight: 300;">Analytical Soul</h2>
    </div>
    <div class="project-card" data-img="Screenshot_24-12-2025_122627_melipil5780-afk.github.io.jpeg" data-title="Clinical Precision">
        <div class="image-frame"><canvas class="image-canvas"></canvas><div class="view-label">SEE FULL WEBSITE</div></div>
        <h2 style="font-family: 'Cormorant Garamond'; font-size: 2.8rem; margin-top: 25px; font-weight: 300;">Clinical Precision</h2>
    </div>
</div>

<div class="style-message">
    <h2 class="shimmer-text">These are just 4 potential visions.</h2>
    <p style="color: #666; margin-top: 25px; letter-spacing: 5px; font-weight: 900; font-size: 0.8rem; max-width: 600px; margin-inline: auto;">But I build whatever you imagine. You say it, and it will be created.</p>
</div>

<section id="final-section">
    <h2 style="font-family:'Cormorant Garamond'; font-size: clamp(2rem, 5vw, 3rem); margin-bottom: 25px;">Ready to exist online?</h2>
    <p style="margin-bottom: 40px; color: #555; max-width: 600px; margin-inline: auto;">Whether you have a full vision or just a name, I build your complete digital presence from scratch.</p>
    <div style="margin-bottom: 60px;">
        <p style="opacity: 0.3; text-decoration: line-through; letter-spacing: 3px;">VALUED AT $2,499</p>
        <h3 style="font-size: clamp(4rem, 12vw, 7rem); font-weight: 900; letter-spacing: -4px;">$599</h3>
        <p style="color: #c5a37d; font-weight: 900; letter-spacing: 6px;">FOUNDER RATE | LIMITED SLOTS</p>
    </div>
    <a href="booking.html" class="cta-btn">START MY WEBSITE FROM SCRATCH</a>
</section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.waves.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.fog.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>

<script>
// === MAIN COSMIC 3D BACKGROUND (Vanta.js) ===
VANTA.WAVES({
  el: "#vanta-bg",
  mouseControls: true,
  touchControls: true,
  gyroControls: true,
  minHeight: 200.00,
  minWidth: 200.00,
  highlightColor: 0xc5a37d,
  midtoneColor: 0x3a6073,
  lowlightColor: 0x172a3a,
  baseColor: 0x000000,
  amplitudeFactor: 2.0,
  shininess: 50.00,
  waveSpeed: 0.30,
  zoom: 0.65
});
VANTA.FOG({
  el: "#vanta-bg",
  highlightColor: 0xc5a37d,
  midtoneColor: 0x88a0c0,
  lowlightColor: 0x1a2a3a,
  baseColor: 0x000000,
  blurFactor: 0.5,
  speed: 1.0,
  zoom: 1.5
});
VANTA.NET({
  el: "#vanta-bg",
  mouseControls: false,
  touchControls: false,
  points: 10,
  maxDistance: 30,
  spacing: 20,
  color: 0xc5a37d,
  backgroundAlpha: 0.6
});

// === 3D SHADER FOR MINI + FULL ===
const imgSources = [
    'Screenshot_24-12-2025_131027_melipil5780-afk.github.io.jpeg',
    'healing.jpg',
    'Screenshot_24-12-2025_122136_melipil5780-afk.github.io.jpeg',
    'Screenshot_24-12-2025_122627_melipil5780-afk.github.io.jpeg'
];
const titles = ['The Grounded Space', 'Somatic Safety', 'Analytical Soul', 'Clinical Precision'];

let currentModalShader = null; // To destroy old when opening new

function init3DCanvas(canvasEl, imgSrc, ampBase = 0.05, isModal = false) {
    const renderer = new THREE.WebGLRenderer({ canvas: canvasEl, alpha: true });
    renderer.setPixelRatio(window.devicePixelRatio);
    renderer.setSize(canvasEl.clientWidth, canvasEl.clientHeight);

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(45, canvasEl.clientWidth / canvasEl.clientHeight, 0.1, 10);
    camera.position.z = isModal ? 1.2 : 1.5;

    const geometry = new THREE.PlaneGeometry(2, 2, 128, 128);

    const texture = new THREE.TextureLoader().load(imgSrc);

    const uniforms = {
        u_time: { value: 0 },
        u_texture: { value: texture },
        u_amp: { value: ampBase },
        u_freq: { value: 3.0 },
        u_brightness: { value: isModal ? 0.9 : 0.4 }
    };

    const material = new THREE.ShaderMaterial({
        uniforms,
        vertexShader: `
            varying vec2 vUv;
            uniform float u_time;
            uniform float u_amp;
            uniform float u_freq;

            float snoise(vec2 v) {
                // Simple noise for organic feel
                return sin(v.x * u_freq + u_time) * sin(v.y * u_freq + u_time * 0.7) * u_amp;
            }

            void main() {
                vUv = uv;
                vec3 pos = position;
                float noise = snoise(pos.xy * 4.0);
                pos.z += noise + sin(u_time * 0.8 + length(pos.xy)) * u_amp * 0.6;
                gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
            }
        `,
        fragmentShader: `
            uniform sampler2D u_texture;
            uniform float u_brightness;
            varying vec2 vUv;
            void main() {
                vec4 tex = texture2D(u_texture, vUv);
                tex.rgb *= u_brightness;
                gl_FragColor = tex;
            }
        `,
        transparent: true
    });

    const mesh = new THREE.Mesh(geometry, material);
    scene.add(mesh);

    let time = 0;
    function animate() {
        time += 0.01;
        uniforms.u_time.value = time;
        renderer.render(scene, camera);
        requestAnimationFrame(animate);
    }
    animate();

    // Hover interaction
    const container = canvasEl.closest(isModal ? '#modal' : '.project-card');
    container.addEventListener('mouseenter', () => {
        uniforms.u_amp.value = ampBase * 2.5;
        uniforms.u_brightness.value = 1.0;
    });
    container.addEventListener('mouseleave', () => {
        uniforms.u_amp.value = ampBase;
        uniforms.u_brightness.value = isModal ? 0.9 : 0.4;
    });

    // Resize
    window.addEventListener('resize', () => {
        camera.aspect = canvasEl.clientWidth / canvasEl.clientHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(canvasEl.clientWidth, canvasEl.clientHeight);
    });

    return { renderer, scene }; // Return for cleanup if needed
}

// Init mini previews
document.querySelectorAll('.image-canvas').forEach((canvas, i) => {
    init3DCanvas(canvas, imgSources[i], 0.04 + i * 0.01);
});

// Open full alive modal
document.querySelectorAll('.project-card').forEach((card, i) => {
    card.addEventListener('click', () => {
        const img = imgSources[i];
        const title = titles[i];
        document.getElementById('modal-title').textContent = title;

        // Clean previous
        if (currentModalShader) {
            currentModalShader.renderer.dispose();
        }

        const modalCanvas = document.getElementById('modal-canvas');
        currentModalShader = init3DCanvas(modalCanvas, img, 0.08, true);

        document.getElementById('modal').classList.add('open');
        document.body.style.overflow = 'hidden';
    });
});

function closeModal() {
    document.getElementById('modal').classList.remove('open');
    document.body.style.overflow = 'auto';
}

// === ORIGINAL SCRIPTS (cursor, loader, text reveal, etc.) ===
function handleMove(e) {
    document.getElementById('spotlight').style.setProperty('--x', e.clientX + 'px');
    document.getElementById('spotlight').style.setProperty('--y', e.clientY + 'px');
    document.getElementById('c').style.left = e.clientX+'px'; document.getElementById('c').style.top = e.clientY+'px';
    document.getElementById('ca').style.left = (e.clientX-22)+'px'; document.getElementById('ca').style.top = (e.clientY-22)+'px';
}

function revealText(text, container) {
    const words = text.split(" ");
    container.innerHTML = words.map(w => `<span class="word">${w}</span>`).join(" ");
    const spans = container.querySelectorAll('.word');
    spans.forEach((span, i) => {
        setTimeout(() => {
            span.classList.add('visible');
            if(i === spans.length - 1) setTimeout(() => document.getElementById('hero-line').classList.add('line-active'), 500);
        }, i * 250);
    });
}

let lCount = 0;
let lInt = setInterval(() => {
    lCount += 5;
    if(lCount >= 100) {
        clearInterval(lInt);
        document.getElementById('loader').style.opacity = "0";
        setTimeout(() => {
            document.getElementById('loader').style.display = "none";
            document.getElementById('hero-sec').classList.add('reveal');
            revealText('I Build Elite Therapy Websites.', document.getElementById('hero-text'));
        }, 800);
    }
    document.getElementById('loader-n').innerText = lCount;
}, 30);

window.addEventListener('scroll', () => {
    const rect = document.getElementById('final-section').getBoundingClientRect();
    document.getElementById('spotlight').style.opacity = rect.top < window.innerHeight/2 ? "0" : "1";
});
</script>
</body>
</html>
